<div th:fragment="users" id="users-frag"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" class="table-wrapper"
>
	<input class="input-filter" type="search" id="user-search"
		placeholder="Filtro"
	>
	<div id="table" style="overflow: auto;">
		<table id="user-table" class="table">
			<thead>
				<tr>
					<th>No</th>
					<th>Username</th>
					<th>Password</th>
					<th>Email</th>
					<th>Role</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tfoot>
				<tr>
					<td colspan="6">
						<div class="links">
							<a href="#">&laquo;</a> <a href="#">&raquo;</a>
						</div>
					</td>
				</tr>
			</tfoot>
			<tbody id="users-body">

				<tr th:each="user : ${content}">
					<td th:text="${user.id}"></td>
					<td th:text="${user.username}"></td>
					<td th:text="${user.password}"></td>
					<td th:text="${user.email}"></td>
					<td th:text="${user.role}"></td>
					<td><span th:id="'edit-row' + ${user.id}"
						class="table-remove glyphicon glyphicon-remove"
					></span></td>
				</tr>
			</tbody>
		</table>
	</div>

	<script>
		/*<![CDATA[*/

		$("#user-search").keyup(function() {

			//split the current value of searchInput
			var data = this.value.split(" ");
			//create a jquery object of the rows
			var jo = $("#users-body").find("tr");
			if (this.value == "") {
				jo.show();
				return;
			}
			//hide all the rows
			jo.hide();

			//Recusively filter the jquery object to get results.
			jo.filter(function(i, v) {
				var $t = $(this);
				for (var d = 0; d < data.length; ++d) {
					if ($t.is(":contains('" + data[d] + "')")) {
						return true;
					}
				}
				return false;
			})
			//show the rows that match.
			.show();
		});
		/*]]>*/
	</script>
</div>





<div th:fragment="routes" id="routes-frag"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" class="table-wrapper"
>
	<input class="input-filter" type="search" id="route-search"
		placeholder="Filtro -- Columna:valor"
	>
	<div id="table" style="overflow: auto;">
		<table id="route-table" class="table">
			<thead>
				<tr>
					<th>No</th>
					<th>Username</th>
					<th>Password</th>
					<th>Email</th>
					<th>Role</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tfoot>
				<tr>
					<td colspan="6">
						<div class="links">
							<a id="routeListSelectBack">&laquo;</a> <input class="index-input" type="text"
								value="PÃ¡gina " readonly
							> <input class="index-input index-input2" id="route-index"
								type="text" th:attr="value = ${index}" readonly
							> <a id="routeListSelectPlus" style="cursor: pointer;" class="routeListGet">&raquo;</a>
						</div>
					</td>
				</tr>
			</tfoot>
			<tbody id="routes-body">

				<tr th:each="route : ${content}">
					<td th:text="${route.id}"></td>
					<td th:text="${route.city}"></td>
					<td th:text="${route.name}"></td>
					<td th:text="${route.lat}"></td>
					<td th:text="${route.lng}"></td>
					<td><span th:id="'edit-row' + ${route.id}"
						class="table-remove glyphicon glyphicon-remove"
					></span></td>
				</tr>
			</tbody>
		</table>
	</div>

	<script>
		/*<![CDATA[*/

		$("#routeListSelectPlus").on("click", function() {
			$("#routeLoader").show();
			var index = $("#route-index").val();
			$("#routeContent").load("/admin/panel/routes?index=" + encodeURIComponent(index), function() {
				$("#routeLoader").hide();
			});
		});
		$("#routeListSelectBack").on("click", function() {
			$("#routeLoader").show();
			var index = $("#route-index").val();
			$("#routeContent").load("/admin/panel/routes?index=" + encodeURIComponent(index), function() {
				$("#routeLoader").hide();
			});
		});
		
		$("#route-search").keyup(function() {

			var headers = [ "ID", "USERNAME", "PASSWORD", "EMAIL", "ROLE" ];
			var val = $("#route-search").val();
			var myString1 = val.substr(0, val.indexOf(":")).toUpperCase();
			var myString2 = val.substr(val.indexOf(":") + 1).toUpperCase();
			var index = headers.indexOf(myString1);

			table = document.getElementById("route-table");
			tr = table.getElementsByTagName("tr");

			for (i = 0; i < tr.length; i++) {
				td = tr[i].getElementsByTagName("td")[index];
				if (td) {
					if (td.innerHTML.toUpperCase().indexOf(myString2) > -1) {
						tr[i].style.display = "";
					} else {
						tr[i].style.display = "none";
					}
				}

			}

		});
		/*]]>*/
	</script>
</div>