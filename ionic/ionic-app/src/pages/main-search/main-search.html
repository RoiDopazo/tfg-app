<!--
  Generated template for the MainSearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="foursquare">
    <ion-title *ngIf="city_to_search">{{ city_to_search.name }}</ion-title>
    <ion-buttons right>
      <button class="top_icons" ion-button icon-only (click)="presentPopover()">
        <ion-icon name="more">
        </ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

  <ion-toolbar>
    <ion-segment [(ngModel)]="select_day" color="foursquare">
      <ion-segment-button id="select_button{{current_day_less}}" value="{{current_day_less}}" (click)="oneDayLess()">
        Día {{ current_day_less }}
      </ion-segment-button>
      <ion-segment-button id="select_button{{current_day}}" value="{{current_day}}" *ngIf="route.numDays >= 2">
        Día {{ current_day }}
      </ion-segment-button>
      <ion-segment-button id="select_button{{current_day_plus}}" value="{{current_day_plus}}" *ngIf="route.numDays >= 3" (click)="oneMoreDay()">
        Día {{ current_day_plus }}
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="main_content">



  <div [ngSwitch]="select_day">

    <!-- DIV DIAS DEL MEDIO -->
    <div *ngSwitchCase=current_day>
      <ion-list *ngIf="route.days[current_day-1].places" [reorder]="editing" (ionItemReorder)="reorderItems(current_day, $event)">
        <div padding *ngFor="let place of route.days[current_day-1].places; let i = index;">
          <ion-item color="foursquare">
            <h2 class="texticon">{{i+1}}. {{place.place.name}}</h2>
          </ion-item>
          <ion-grid class="placegrid">
            <ion-row class="fila">
              <ion-col class="columna">
                <ion-icon class="icono_col" name="podium">
                  Info:</ion-icon>
              </ion-col>
            </ion-row>
            <ion-row class="fila">
              <ion-col class="columna">
                <ion-icon icon-left class="icono_col" name="log-in">
                  {{ place.time }}
                </ion-icon>
              </ion-col>
              <ion-col class="columna">
                <ion-icon class="icono_col" name="time">
                </ion-icon>
                <ion-datetime displayFormat="HH:mm" [(ngModel)]="place.time"></ion-datetime>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </ion-list>
      <div id="div_time">
        <button id="time_button" ion-button icon-left color="light" (click)="showActionsAdd()">
          <ion-icon name="add"></ion-icon>
          Añadir Sitio
        </button>
      </div>
    </div>

    <!-- DIV PRIMER DIA -->
    <div *ngSwitchCase=current_day_less>
      <ion-list *ngIf="route.days[current_day_less-1].places" [reorder]="editing" (ionItemReorder)="reorderItems(current_day_less, $event)">
        <ion-card *ngFor="let place of route.days[current_day_less-1].places; let i = index;">

          <ion-item id="placeitem" color="foursquare_light">
            <ion-thumbnail id="placethumbnail" item-end>
              <img class="imgicon" src="{{place.place.photo}}">
            </ion-thumbnail>
            <h2 class="placetitulo">{{place.order}}</h2>

            <div *ngIf="i==0" class="placehour1">
              <ion-icon class="icono_col" name="log-in"></ion-icon>
              {{convertMsToDate(route.days[current_day_less-1].startTime)}}
            </div>

            <div *ngIf="i!=0" class="placehour1">
              <ion-icon class="icono_col" name="log-in"></ion-icon>
              FIX
            </div>

            <div class="placehour2" (click)="picker.open()">
              <ion-icon id="houricon1" name="log-out"></ion-icon>
              {{getDepartureTime(route.days[current_day_less-1].startTime, place.time)}} {{convertMsToString(place.time)}}
              <ion-icon id="houricon2" name="settings"></ion-icon>
            </div>
          </ion-item>
          <ion-datetime style="display: none" #picker pickerFormat="HH mm" hourValues="0,1,2,3,4,5,6" minuteValues="0,5,10,15,20,25,30,35,40,45,50,55"
            [(ngModel)]="selectedTime" (ngModelChange)="setPlaceTime(current_day_less, i, selectedTime)"></ion-datetime>
        </ion-card>
      </ion-list>
      <div id="div_add_bottom">
        <button id="button_add_bottom" ion-button icon-left color="light" (click)="showActionsAdd()">
          <ion-icon name="add"></ion-icon>
          Añadir Sitio
        </button>
      </div>
    </div>

    <!-- DIV ULTIMO DIA -->
    <div *ngSwitchCase=current_day_plus>
      <ion-list *ngIf="route.days[current_day_plus-1].places" [reorder]="editing" (ionItemReorder)="reorderItems(current_day_plus, $event)">
        <ion-card *ngFor="let place of route.days[current_day_plus-1].places; let i = index;">
          <ion-item color="foursquare">
            <h2 class="texticon">{{i+1}}. {{place.name}}</h2>
          </ion-item>
          <div class="separator"></div>
          <ion-card-header>
            <h2 class="texticon">{{place.distance}}</h2>
          </ion-card-header>
        </ion-card>
      </ion-list>
      <div id="div_time">
        <button id="time_button" ion-button icon-left color="light" (click)="showActionsAdd()">
          <ion-icon name="add"></ion-icon>
          Añadir Sitio
        </button>
      </div>
    </div>
  </div>



</ion-content>